box: golang:latest

build:
  steps:
    - arjen/hugo-build:
        version: "HEAD"

test:
  steps:
    - kyleboyle/html-proofer-test:
        version: "2.3.0"

deploy:
  steps:
    - samueldebruyn/minify
    - s3sync:
        key-id: $KEY
        key-secret: $SECRET
        bucket-url: s3://jiridj.be
        source-dir: public
        opts: --guess-mime-type --no-mime-magic --no-preserve --cf-invalidate
